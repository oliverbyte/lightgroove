# Project-Specific AI Instructions for LightGroove

## Git Workflow Rules

**IMPORTANT**: Do NOT automatically push commits to remote repository.

- ✅ **ALLOWED**: `git add` and `git commit` commands
- ❌ **FORBIDDEN**: `git push` commands (unless explicitly requested by user)

After committing changes, inform the user that changes are committed locally and wait for explicit instruction to push.

## Workflow

1. Make code changes
2. Run `git add -A && git commit -m "message"`
3. **STOP** - Do not push automatically
4. Wait for user to explicitly ask for push

## Documentation Update Rule

**BEFORE** pushing to main branch:
- Update [README.md](README.md) with end-user relevant changes (features, installation, configuration)
- Update [DEVELOPMENT.md](DEVELOPMENT.md) with developer-relevant changes (architecture, setup, build process)

## Adding New Color FX Programs

When adding a new color FX program (e.g., random_5, random_6, etc.), **ALWAYS** update these files:

### 1. Backend: `src/color_manager.py`
- Add new thread method (e.g., `_run_random_5_fx()`)
- Add case in `start_fx()` method to handle the new FX name
- Test the logic before committing

### 2. Frontend HTML: `src/templates/tab_colors.html`
- Add button with ID following pattern: `id="fx-random-X"`
- Style the button to visually represent the effect

### 3. Frontend JavaScript: `src/templates/base.html`
- **CRITICAL**: Add event listener for the new button (e.g., `document.getElementById('fx-random-X')`)
- **CRITICAL**: Include new button ID in ALL selector queries:
  - Static color button handler: `document.querySelectorAll('#fx-random-1, #fx-random-2, ..., #fx-random-X')`
  - All individual FX button handlers: update each `querySelectorAll` call
  - Stop button handler: `document.querySelectorAll('#fx-random-1, ..., #fx-random-X')`
  - FX sync in `updateActiveColor()`: `document.querySelectorAll('#fx-random-1, ..., #fx-random-X')`

### Common Issues to Avoid
- ❌ Forgetting to add event listener → button does nothing when clicked
- ❌ Forgetting to include button in selectors → button doesn't highlight/unhighlight properly
- ❌ Not testing with actual fixtures → logic errors not discovered until runtime

## Reason

User wants to review commits before pushing to remote repository.
